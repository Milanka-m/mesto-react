(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{14:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),c=n(6),s=n.n(c),r=(n(14),n(9)),i=n(2),u=o.a.createContext(),l=o.a.createContext(),d=n(0);var p=function(){return Object(d.jsx)("header",{className:"header",children:Object(d.jsx)("a",{href:"#",className:"header__logo link",target:"_self",rel:"noopener"})})};var m=function(e){var t=e.card,n=e.onCardClick,a=e.onCardLike,c=e.onCardDelete,s=o.a.useContext(u),r=t.owner._id===s._id,i="".concat(r&&"elements__icon-delete_active"),l=t.likes.some((function(e){return e._id===s._id})),p="".concat(l&&"elements__icon-favorite_active");return Object(d.jsxs)("article",{className:"elements__card",children:[Object(d.jsx)("div",{className:"elements__card-image",style:{backgroundImage:"url(".concat(t.link,")")},alt:t.name,onClick:function(){n(t)}}),Object(d.jsx)("button",{className:"elements__icon-delete ".concat(i," link"),type:"button","aria-label":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443",onClick:function(){c(t)}}),Object(d.jsxs)("div",{className:"elements__label",children:[Object(d.jsx)("h2",{className:"elements__heading",children:t.name}),Object(d.jsxs)("ul",{className:"elements__like",children:[Object(d.jsx)("li",{children:Object(d.jsx)("button",{className:"elements__icon-favorite ".concat(p," link"),type:"button","aria-label":"\u041f\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043b\u0430\u0439\u043a",onClick:function(){a(t)}})}),Object(d.jsx)("li",{children:Object(d.jsx)("p",{className:"elements__like-number",children:t.likes.length})})]})]})]})};var j=function(e){var t=e.cards,n=e.onCardLike,a=e.onCardDelete,c=e.onEditAvatar,s=e.onEditProfile,r=e.onAddPlace,i=e.onCardClick,l=o.a.useContext(u);return Object(d.jsxs)("main",{className:"content",children:[Object(d.jsxs)("section",{className:"profile",children:[Object(d.jsxs)("div",{className:"profile__info",children:[Object(d.jsx)("button",{className:"profile__button-avatar",onClick:c,type:"button","aria-label":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",children:Object(d.jsx)("div",{className:"profile__avatar",style:{backgroundImage:"url(".concat(l.avatar,")")}})}),Object(d.jsxs)("div",{className:"profile__description",children:[Object(d.jsx)("h1",{className:"profile__title",children:l.name}),Object(d.jsx)("button",{className:"profile__button-edit profile__icon-edit link",onClick:s,type:"button","aria-label":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(d.jsx)("p",{className:"profile__subtitle",children:l.about})]})]}),Object(d.jsx)("button",{className:"profile__button-add profile__icon-add link",onClick:r,type:"button","aria-label":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435"})]}),Object(d.jsx)("section",{className:"elements",children:t.map((function(e){return Object(d.jsx)(m,{card:e,onCardLike:n,onCardDelete:a,onCardClick:i},e._id)}))})]})};var f=function(){return Object(d.jsx)("footer",{className:"footer",children:Object(d.jsxs)("p",{className:"footer__copyright",children:["\xa9 ",(new Date).getFullYear()," \u041c\u0438\u043b\u0430\u043d\u0430 \u0411\u0438\u0440\u0443\u043b\u044f"]})})};var h=function(e){var t=e.onSubmit,n=e.isOpen,a=e.name,o=e.title,c=e.onClose,s=e.children,r=e.nameButton,i="".concat(n&&"popup_opened");return Object(d.jsx)("div",{className:"popup ".concat(i),children:Object(d.jsxs)("div",{className:"popup__container",children:[Object(d.jsx)("button",{className:"popup__close popup-profile-close link",type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u043f\u043e\u043f\u0430\u043f",onClick:c}),Object(d.jsxs)("form",{className:"popup__form popup-profile-form",name:a,onSubmit:t,noValidate:!0,children:[Object(d.jsxs)("div",{className:"popup__form-container",children:[Object(d.jsx)("h2",{className:"popup__form-title",children:o}),s]}),Object(d.jsx)("fieldset",{className:"popup__form-handlers",children:Object(d.jsx)("button",{type:"submit",className:"popup__form-button link",children:r})})]})]})})};var _=function(e){var t=e.isOpen,n=e.onClose,a=e.link,o=e.name,c="".concat(t&&"popup_opened");return Object(d.jsx)("div",{className:"popup-image popup ".concat(c),children:Object(d.jsxs)("div",{className:"popup-image__container",children:[Object(d.jsx)("button",{className:"popup__close popup-image-close link",type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u043f\u043e\u043f\u0430\u043f",onClick:n}),Object(d.jsxs)("figure",{className:"popup-image__figure",children:[Object(d.jsx)("img",{className:"popup-image__illustration",src:a,alt:o}),Object(d.jsx)("figcaption",{children:Object(d.jsx)("p",{className:"popup-image__caption",children:o})})]})]})})};var b=function(e){var t=e.onUpdateUser,n=e.isOpen,a=e.onClose,c=o.a.useContext(u),s=o.a.useState(""),r=Object(i.a)(s,2),l=r[0],p=r[1],m=o.a.useState(""),j=Object(i.a)(m,2),f=j[0],_=j[1];return o.a.useEffect((function(){Object.keys(c).length&&(p(c.name),_(c.about))}),[c]),Object(d.jsx)(h,{onSubmit:function(e){e.preventDefault(),t({name:l,about:f})},isOpen:n,onClose:a,title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",nameButton:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",name:"profile",children:Object(d.jsxs)("fieldset",{className:"popup__form-input-container",children:[Object(d.jsxs)("section",{className:"popup__form-section",children:[Object(d.jsx)("input",{className:"popup__form-input",value:l,onChange:function(e){p(e.target.value)},type:"text",name:"name",id:"name",placeholder:"\u0418\u043c\u044f",minLength:"2",maxLength:"40",required:!0}),Object(d.jsx)("span",{className:"popup__form-input-error",id:"name-error"})]}),Object(d.jsxs)("section",{className:"popup__form-section",children:[Object(d.jsx)("input",{className:"popup__form-input",value:f,onChange:function(e){_(e.target.value)},type:"text",name:"about",id:"about",placeholder:"\u041e \u0441\u0435\u0431\u0435",minLength:"2",maxLength:"200",required:!0}),Object(d.jsx)("span",{className:"popup__form-input-error",id:"about-error"})]})]})})};var O=function(e){var t=e.onUpdateAvatar,n=e.isOpen,a=e.onClose,c=o.a.useRef();return o.a.useEffect((function(){n&&(c.current.value="")}),[n]),Object(d.jsx)(h,{onSubmit:function(e){e.preventDefault(),t({avatar:c.current.value})},isOpen:n,onClose:a,title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",nameButton:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",name:"avatar",children:Object(d.jsx)("fieldset",{className:"popup__form-input-container",children:Object(d.jsxs)("section",{className:"popup__form-section",children:[Object(d.jsx)("input",{ref:c,className:"popup__form-input",type:"url",name:"link",id:"link",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0}),Object(d.jsx)("span",{className:"popup__form-input-error",id:"link-error"})]})})})};var v=function(e){var t=e.onAddPlace,n=e.isOpen,a=e.onClose,c=o.a.useState(""),s=Object(i.a)(c,2),r=s[0],u=s[1],l=o.a.useState(""),p=Object(i.a)(l,2),m=p[0],j=p[1];return o.a.useEffect((function(){n&&(u(""),j(""))}),[n]),Object(d.jsx)(h,{onSubmit:function(e){e.preventDefault(),t({name:r,link:m})},isOpen:n,onClose:a,title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",nameButton:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",name:"card",children:Object(d.jsxs)("fieldset",{className:"popup__form-input-container",children:[Object(d.jsxs)("section",{className:"popup__form-section",children:[Object(d.jsx)("input",{className:"popup__form-input",type:"text",value:r,onChange:function(e){u(e.target.value)},name:"namecard",id:"namecard",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",minLength:"2",maxLength:"30",required:!0}),Object(d.jsx)("span",{className:"popup__form-input-error",id:"namecard-error"})]}),Object(d.jsxs)("section",{className:"popup__form-section",children:[Object(d.jsx)("input",{className:"popup__form-input",type:"url",value:m,onChange:function(e){j(e.target.value)},name:"linkcard",id:"linkcard",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0}),Object(d.jsx)("span",{className:"popup__form-input-error",id:"linkcard-error"})]})]})})},x=n(7),k=n(8),g=new(function(){function e(t){var n=t.address,a=t.token,o=t.groupID;Object(x.a)(this,e),this._address=n,this._token=a,this._groupID=o}return Object(k.a)(e,[{key:"getUsers",value:function(){return fetch("".concat(this._address,"/v1/").concat(this._groupID,"/users/me"),{headers:{authorization:this._token}}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e.status))}))}},{key:"getCards",value:function(){return fetch("".concat(this._address,"/v1/").concat(this._groupID,"/cards"),{headers:{authorization:this._token}}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0449\u0438\u0431\u043a\u0430 ".concat(e.status))}))}},{key:"editUser",value:function(e){return fetch("".concat(this._address,"/v1/").concat(this._groupID,"/users/me"),{method:"PATCH",headers:{authorization:this._token,"Content-type":"application/json"},body:JSON.stringify({name:e.name,about:e.about})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0449\u0438\u0431\u043a\u0430 ".concat(e.status))}))}},{key:"addCard",value:function(e){return fetch("".concat(this._address,"/v1/").concat(this._groupID,"/cards"),{method:"POST",headers:{authorization:this._token,"Content-type":"application/json"},body:JSON.stringify({name:e.name,link:e.link})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0449\u0438\u0431\u043a\u0430 ".concat(e.status))}))}},{key:"removeCard",value:function(e){return fetch("".concat(this._address,"/v1/").concat(this._groupID,"/cards/").concat(e),{method:"DELETE",headers:{authorization:this._token}}).then((function(e){return e.ok?Promise.resolve("success"):Promise.reject("\u041e\u0449\u0438\u0431\u043a\u0430 ".concat(e.status))}))}},{key:"addLikeCard",value:function(e){return fetch("".concat(this._address,"/v1/").concat(this._groupID,"/cards/likes/").concat(e),{method:"PUT",headers:{authorization:this._token}}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0449\u0438\u0431\u043a\u0430 ".concat(e.status))}))}},{key:"removeLikeCard",value:function(e){return fetch("".concat(this._address,"/v1/").concat(this._groupID,"/cards/likes/").concat(e),{method:"DELETE",headers:{authorization:this._token}}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0449\u0438\u0431\u043a\u0430 ".concat(e.status))}))}},{key:"editAvatar",value:function(e){var t=e.avatar;return fetch("".concat(this._address,"/v1/").concat(this._groupID,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this._token,"Content-type":"application/json"},body:JSON.stringify({avatar:t})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0449\u0438\u0431\u043a\u0430 ".concat(e.status))}))}}]),e}())({address:"https://mesto.nomoreparties.co",token:"6db4154b-d992-4850-8211-1b620ba1fb44",groupID:"cohort-22"});var C=function(){var e=o.a.useState(!1),t=Object(i.a)(e,2),n=t[0],a=t[1],c=o.a.useState(!1),s=Object(i.a)(c,2),m=s[0],x=s[1],k=o.a.useState(!1),C=Object(i.a)(k,2),N=C[0],y=C[1],P=o.a.useState(!1),S=Object(i.a)(P,2),D=S[0],L=S[1],E=o.a.useState({}),I=Object(i.a)(E,2),A=I[0],U=I[1],z=o.a.useState({}),T=Object(i.a)(z,2),B=T[0],q=T[1],w=o.a.useState({}),F=Object(i.a)(w,2),J=F[0],H=F[1],M=o.a.useState([]),R=Object(i.a)(M,2),V=R[0],Y=R[1];function G(){a(!1),x(!1),y(!1),L(!1)}return o.a.useEffect((function(){g.getCards().then((function(e){Y(e)})).catch((function(e){return console.log(e)}))}),[]),o.a.useEffect((function(){g.getUsers().then((function(e){q(e)})).catch((function(e){return console.log(e)}))}),[]),Object(d.jsx)(u.Provider,{value:B,children:Object(d.jsx)(l.Provider,{value:J,children:Object(d.jsx)("div",{className:"page",children:Object(d.jsxs)("div",{className:"root",children:[Object(d.jsx)(p,{}),Object(d.jsx)(j,{cards:V,onCardLike:function(e){var t=e.likes.some((function(e){return e._id===B._id}));t?g.removeLikeCard(e._id,t).then((function(t){Y((function(n){return n.map((function(n){return n._id===e._id?t:n}))}))})).catch((function(e){return console.log(e)})):g.addLikeCard(e._id,!t).then((function(t){Y((function(n){return n.map((function(n){return n._id===e._id?t:n}))}))})).catch((function(e){return console.log(e)}))},onCardDelete:function(e){g.removeCard(e._id).then((function(){Y((function(t){return t.filter((function(t){return t._id!==e._id}))}))})).catch((function(e){return console.log(e)}))},onEditProfile:function(){a(!0)},onAddPlace:function(){x(!0)},onEditAvatar:function(){y(!0)},onCardClick:function(e){U(e),L(!0)}}),Object(d.jsx)(f,{}),Object(d.jsx)(b,{onUpdateUser:function(e){var t=e.name,n=e.about;g.editUser({name:t,about:n}).then((function(e){q(e),G()})).catch((function(e){return console.log(e)}))},isOpen:n,onClose:G}),Object(d.jsx)(O,{onUpdateAvatar:function(e){var t=e.avatar;g.editAvatar({avatar:t}).then((function(e){q(e),G()})).catch((function(e){return console.log(e)}))},isOpen:N,onClose:G}),Object(d.jsx)(v,{onAddPlace:function(e){var t=e.name,n=e.link;g.addCard({name:t,link:n}).then((function(e){H(e),Y([].concat(Object(r.a)(V),[e])),G()})).catch((function(e){return console.log(e)}))},isOpen:m,onClose:G}),Object(d.jsx)(h,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b ?",name:"removecard",nameButton:"\u0414\u0430"}),Object(d.jsx)(_,{isOpen:D,card:A,onClose:G,link:A.link,name:A.name})]})})})})},N=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,17)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),o(e),c(e),s(e)}))};s.a.render(Object(d.jsx)(o.a.StrictMode,{children:Object(d.jsx)(C,{})}),document.getElementById("root")),N()}},[[16,1,2]]]);
//# sourceMappingURL=main.c9bc51fc.chunk.js.map